name: ğŸš€ Manter App Streamlit Ativo

on:
  schedule:
    # â° EXECUTA A CADA 3 HORAS (8x AO DIA)
    - cron: '0 */3 * * *'  # 00:00, 03:00, 06:00, 09:00, 12:00, 15:00, 18:00, 21:00 UTC
  workflow_dispatch:        # âœ… PERMITE EXECUÃ‡ÃƒO MANUAL

jobs:
  keep-app-alive:
    runs-on: ubuntu-latest
    name: ğŸ”„ Fazer ping no app Streamlit
    steps:
      - name: ğŸ“¡ Fazer requisiÃ§Ã£o para o app
        run: |
          echo "ğŸ•’ Iniciando ping em $(date)"
          
          # ğŸ”§ URL DO SEU APP STREAMLIT
          APP_URL="https://sistema-fardamentos-u7rrptsdvva9tuznetaufa.streamlit.app/"
          
          # Faz a requisiÃ§Ã£o e captura o status
          STATUS_CODE=$(curl -s -o /dev/null -w "%{http_code}" "$APP_URL")
          
          # Verifica se a requisiÃ§Ã£o foi bem-sucedida
          if [ "$STATUS_CODE" -eq 200 ]; then
            echo "âœ… SUCCESS: App respondendo normalmente (Status: $STATUS_CODE)"
            echo "ğŸŒ URL: $APP_URL"
            echo "â° HorÃ¡rio: $(date)"
          else
            echo "âš ï¸  AVISO: App retornou status $STATUS_CODE"
            echo "ğŸ”— URL: $APP_URL"
            echo "ğŸ•’ HorÃ¡rio: $(date)"
          fi
          
          echo "ğŸ¯ Ping concluÃ­do em $(date)"

      - name: ğŸ“Š Registrar execuÃ§Ã£o
        run: |
          echo "ğŸ”„ GitHub Actions executado com sucesso!"
          echo "ğŸ“… PrÃ³xima execuÃ§Ã£o: em 3 horas"
          echo "ğŸ’¾ Backup automÃ¡tico tambÃ©m estÃ¡ ativo"
